<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>06 - Validation</title>
  <script type="module" src="../../dist/aft.js"></script>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 600px; margin: 2rem auto; padding: 0 1rem; }
    .field { margin: 1rem 0; }
    label { display: block; margin-bottom: 4px; font-weight: 500; }
    input { font-size: 1rem; padding: 0.5rem; width: 100%; box-sizing: border-box; }
    .aft-invalid { border: 2px solid #f44336; }
    .aft-valid { border: 2px solid #4caf50; }
    .error { color: #f44336; font-size: 0.85rem; margin-top: 4px; }
    .readonly-demo { background: #f5f5f5; }
    .status { padding: 1rem; border-radius: 4px; margin: 1rem 0; }
    .status.valid { background: #e8f5e9; }
    .status.invalid { background: #ffebee; }
  </style>
</head>
<body>

<h1>06 - Validation</h1>
<p>Use constraint attributes to validate input.</p>

<aft-form>
  <aft-data>
  {
    "email": "",
    "age": "",
    "username": "admin",
    "isLocked": true
  }
  </aft-data>

  <div class="field">
    <label>Email (required, must contain @)</label>
    <input aft-ref="email"
           aft-required="true"
           aft-constraint="value.includes('@')"
           placeholder="you@example.com">
    <div class="error" aft-show="$errors.email">Please enter a valid email address</div>
  </div>

  <div class="field">
    <label>Age (must be 18-120)</label>
    <input type="number" aft-ref="age"
           aft-required="true"
           aft-constraint="value >= 18 && value <= 120"
           placeholder="18">
    <div class="error" aft-show="$errors.age">Age must be between 18 and 120</div>
  </div>

  <div class="field">
    <label>Username (readonly when locked)</label>
    <input aft-ref="username"
           aft-readonly="isLocked"
           class="readonly-demo">
    <label style="font-weight: normal; margin-top: 8px;">
      <input type="checkbox" aft-ref="isLocked"> Lock username
    </label>
  </div>

  <div class="status" aft-class="{valid: !$errors.any, invalid: $errors.any}">
    <span aft-if="$errors.any">Please fix the errors above.</span>
    <span aft-if="!$errors.any">All fields are valid!</span>
  </div>
</aft-form>

<h2>Validation Attributes</h2>
<table style="width: 100%; border-collapse: collapse;">
  <tr><td style="padding: 4px; border: 1px solid #ccc;"><code>aft-required</code></td><td style="padding: 4px; border: 1px solid #ccc;">Required when expression is truthy</td></tr>
  <tr><td style="padding: 4px; border: 1px solid #ccc;"><code>aft-constraint</code></td><td style="padding: 4px; border: 1px solid #ccc;">Valid when expression is truthy (<code>value</code> available)</td></tr>
  <tr><td style="padding: 4px; border: 1px solid #ccc;"><code>aft-readonly</code></td><td style="padding: 4px; border: 1px solid #ccc;">Read-only when expression is truthy</td></tr>
</table>

<h2>The <code>$errors</code> Object</h2>
<ul>
  <li><code>$errors.email</code> — true if email has errors</li>
  <li><code>$errors.any</code> — true if any field has errors</li>
  <li><code>$errors.all</code> — array of all errors</li>
</ul>

</body>
</html>
